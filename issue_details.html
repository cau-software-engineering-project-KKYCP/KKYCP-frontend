<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Issue Tracker</title>
  <style>
    /* 이슈 테이블 관련 스타일 */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #000;
      text-align: center;
    }
    th {
      background-color: #007bff;
      color: #fff;
    }
    /* 댓글 섹션 관련 스타일 */
    body {
      font-family: Arial, sans-serif;
    }
    .container {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
    }
    label {
      font-weight: bold;
    }
    textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
    }
    button {
      padding: 8px 16px;
      background-color: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    .comment {
      margin-bottom: 10px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
    }
  </style>
</head>
<body>
  <!-- 이슈 테이블 섹션 -->
  <table>
    <tr>
      <th>Issue Title</th>
      <th>Created Date</th>
      <th>Issue Description</th>
      <th>Reporter</th>
      <th>Reported Date</th>
      <th>Fixer</th>
      <th>Assign</th>
      <th>Priority</th>
      <th>Issue Statements</th>
    </tr>
    <!-- 서버로부터 받아온 데이터를 동적으로 추가할 수 있습니다. -->
    <tr>
      <td>Sample Issue</td>
      <td>2024-05-15</td>
      <td>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</td>
      <td>John Doe</td>
      <td>2024-05-16</td>
      <td>Jane Smith</td>
      <td>Developer A</td>
      <td>High</td>
      <td>Some statements about the issue.</td>
    </tr>
    <!-- 추가적인 데이터 행들을 여기에 추가할 수 있습니다. -->
  </table>

  <!-- 댓글 섹션 -->
  <div class="container">
    <div id="usernameDisplay"></div>
    <form id="commentForm">
      <label for="comment">Comment:</label><br>
      <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
      <button type="submit">Submit</button>
    </form>
    <div id="commentList"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const username = "User123";
      const usernameDisplay = document.getElementById("usernameDisplay");
      usernameDisplay.textContent = `Username: ${username}`;

      const commentForm = document.getElementById("commentForm");
      const commentList = document.getElementById("commentList");

      // 코멘트 추가 함수
      function addComment(commentText) {
        const currentTime = new Date().toLocaleString();
        const commentElement = document.createElement("div");
        commentElement.classList.add("comment");
        commentElement.innerHTML = `
          <div><strong>${username}</strong> - ${currentTime}</div>
          <div>${commentText}</div>
          <button class="editBtn">Edit</button>
          <button class="deleteBtn">Delete</button>
          <hr>
        `;
        commentList.appendChild(commentElement);
      }

      // 코멘트 추가 이벤트 리스너
      commentForm.addEventListener("submit", function (event) {
        event.preventDefault();
        const commentInput = document.getElementById("comment");
        const commentText = commentInput.value.trim();

        if (commentText !== "") {
          addComment(commentText);
          commentInput.value = ""; // 입력창 비우기
        } else {
          alert("Please enter a comment.");
        }
      });

      // 코멘트 수정 및 삭제 이벤트 위임
      commentList.addEventListener("click", function (event) {
        const target = event.target;
        if (target.classList.contains("editBtn")) {
          const commentDiv = target.parentElement;
          const commentTextDiv = commentDiv.querySelector("div:nth-child(2)");
          const newCommentText = prompt("Edit comment:", commentTextDiv.textContent.trim());
          if (newCommentText !== null) {
            commentTextDiv.textContent = newCommentText;
          }
        } else if (target.classList.contains("deleteBtn")) {
          const commentDiv = target.parentElement;
          if (confirm("Are you sure you want to delete this comment?")) {
            commentDiv.remove(); // 삭제
            // 여기서 서버에 삭제 요청을 보낼 수 있습니다.
          }
        }
      });
    });
  </script>
</body>
</html>